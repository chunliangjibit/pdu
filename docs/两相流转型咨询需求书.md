# PyDetonation-Ultra (PDU) 两相流转型技术咨询需求书 (V1.1)

**版本**: 1.1 (专业增强版)
**日期**: 2026-01-30
**状态**: 技术评审稿
**核心目标**: 解决单流体平衡模型在非理想爆轰模拟中的“压力一致性”悖论，构建全链路可微的两相反应流（Differentiable Two-Phase Reactive Flow）架构。

---

## 第一部分：项目现状与架构综述

### 1.1 项目定位
**PyDetonation-Ultra (PDU)** 是一个基于 **JAX** 框架的高保真炸药爆轰性能预测与配方逆向设计平台。其核心特性是**全程可微 (End-to-End Differentiable)**，支持基于梯度的反向配方参数寻优。

### 1.2 当前技术架构 (V10.6 "Constrained Physics")
目前 PDU 处于 **V10.6** 版本，采用的是 **单流体热力学平衡 (Single-Fluid Equilibrium)** 架构。

*   **核心求解器**: `Schur-RAND` 加速的 KKT 系统，求解 $\min \sum n_i \mu_i$。
*   **物理补丁 (Ad-hoc Fixes)**:
    *   **Matrix Quenching (矩阵淬灭)**: 强制引入反应效率因子 (~97.5%) 模拟固体颗粒对爆轰波阵面的扰动。
    *   **Physical Heat Sink (物理热沉)**: 在 CJ 面强制扣除铝粉升温/熔化的显热 ($\sim 45 kJ/mol$)。
    *   **JWL 能量锚定**: 引入 $\eta=0.72$ 的有效做功系数，解决非理想炸药后燃烧能量的剥离问题。

---

## 第二部分：遇到的技术瓶颈 (The Fidelity Wall)

尽管 V10.6 在工程应用上表现稳健，但在推进更高精度的“微观结构敏感性设计”时遇到了单流体模型的物理极限。

### 2.1 压力一致性悖论 (Pressure Duality)
*   **物理矛盾**: 对于含铝炸药（如 Tritonal），PDU 预测的气体平衡压力为 **12 GPa**，而实验观测（如平板凹痕、冲击波阻抗测量）通常报告 **21 GPa**。
*   **瓶颈**: 单流体模型只有一个压力标量 $P$。若强行拟合 21 GPa，会导致爆速 $D$ 严重虚高且 JWL 曲线发生拓扑畸变（Ghost Parameters）；若坚持 12 GPa，则无法解释多相流中的动量传递效应。

### 2.2 唯象修正的局限性
*   **尺度效应盲区**: 当前模型无法区分纳米铝与微米铝的动力学差异（尺寸效应），无法捕捉反应区长度（Reaction Zone Length）对爆轰稳定性的影响。
*   **参数敏感性失真**: 由于缺乏空间剖面 $P(x)$，模型无法指导复杂点火序列或具有细观结构的装药设计。

---

## 第三部分：转型咨询需求

我们计划将内核升级为支持一维稳态反应区（1D ZND Structure）的 **两相流 (Two-Phase Flow)** 架构。

### 3.1 物理闭合律（Physical Closures）的构建
*   **咨询需求**: 在极高压（$>10 GPa$）环境下，如何建立物理自洽的相间交换项（阻力 Drag、热交换 Heat Transfer、质量传递 Mass Transfer）？
*   **自标度律**: 是否存在基于组分基本常数（熔点、导热系数）的**参数标度律（Scaling Laws）**，实现在不增加用户输入负担的前提下，自动缩放细观动力学参数？

### 3.2 广义 CJ 条件与声速面定义
*   **咨询需求**: 在气-固不平衡（Velocity/Temperature Slip）条件下，如何定义“广义 CJ 状态”？计算爆速时应锚定在哪一相的特性特征线（Characteristic）上？
*   **压力解析**: 如何建立从“相压力（Phase Pressure）”到“宏观探测压力（Shock Pressure）”的传递函数？

### 3.3 JAX 架构下的数值刚性与伴随敏感性
*   **咨询需求**: 
    1.  爆轰 ODE 方程具有极高刚性（Stiffness）。在 JAX 环境下，如何实现高效、稳定的 **伴随敏感性方法（Adjoint Sensitivity Method）**，以保证损失函数梯度在跨越相变点时的连续性？
    2.  评估引入**神经网络算子（Neural Operators）**替代复杂相间积分以提升计算时效（目标 < 5s）的可行性。

### 3.4 宏观-微观归一化（Homogenization）
*   **咨询需求**: 
    *   如何将两相流计算出的复杂流场历程，科学地投影为标准的 **JWL 五参数**？
    *   建议采用何种归一化逻辑（能量权重平均 vs. 动量平衡投影）来生成工程兼容的状态方程？

---

## 第四部分：核心专家问询清单 (The Hard Questions)

1.  **关于动量贡献**: Tritonal 21 GPa 的实验值是否能通过引入铝粉颗粒的动量流项（$\rho_p (u_g - u_p)^2$）得到完全解释，而无需人工调高气体相的 EOS 压力？
2.  **关于能量剥离**: 如何在动力学层面显式处理铝粉熔化潜热与气相热沉的解耦？
3.  **关于混合架构**: 采用“单流体初值 + 两相流 ZND 插件”的混合方案（Hybrid Architecture），是否会存在热力学自洽性冲突？
4.  **关于声速奇异性**: 在非理想爆轰中，如果能量释放率（Heat Release Rate）存在剧烈波动，如何处理 ODE 积分中的声速奇异点（Singularities）？

---

## 第五部分：预期交付成果

1.  一套适用于 JAX 架构的**简化两相反应流控制方程组**。
2.  针对非理想炸药实验（圆筒、平板凹痕）的**压力转化数学模型**。
3.  关于**可微动力学求解器**在数值稳定性和梯度回传方面的避坑指南。

